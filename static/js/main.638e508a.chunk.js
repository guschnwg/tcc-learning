/*! For license information please see main.638e508a.chunk.js.LICENSE.txt */
(this["webpackJsonptcc-learning"]=this["webpackJsonptcc-learning"]||[]).push([[0],{60:function(t,e,n){},61:function(t,e,n){"use strict";n.r(e);var r=n(0),o=n.n(r),i=n(13),a=n.n(i),c=n(21),s=n(17),u=n.n(s),l=n(27),d=n.n(l),h=n(28),f=n(8),p=n(6),j=n(10),v=n(7),b=n(32),m=n(33),g=n(22),O=n(34),x=n.p+"static/media/click-2.66336ee5.wav",y=n(1),w=["children"],k=new Audio(x);k.load();var L=function(t){var e=t.children,n=Object(O.a)(t,w);return Object(y.jsx)("button",Object(g.a)(Object(g.a)({},n),{},{onClick:function(t){k.play(),n.onClick&&n.onClick(t)},children:e}))},N={lat:-13.8860709,lng:-57.2789963};function C(t,e,n,r){function o(t){var e=Math.sin(t*Math.PI/180),n=Math.log((1+e)/(1-e))/2;return Math.max(Math.min(n,Math.PI),-Math.PI)/2}var i=Math.abs(o(t)-o(n)),a=Math.abs(e-r),c=i/Math.PI,s=a/360,u=Math.log(1/c)/Math.log(2),l=Math.log(1/s)/Math.log(2);return Math.min(u,l)}var S=function(t){var e=t.coordinates,n=void 0===e?N:e,r=t.zoom,o=void 0===r?4.5:r,i=t.options,a=void 0===i?{}:i,c=t.children,s=t.onMapClick;return Object(y.jsx)(f.a,{mapContainerStyle:{height:"100%"},center:n,zoom:o,options:a,onClick:s,children:c})},E=function(t){var e=t.children,n=t.show,r=t.onHide;return Object(y.jsx)(u.a,{isOpen:n,onRequestClose:r,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,style:{overlay:{backgroundColor:void 0},content:{inset:"150px",border:"1px solid #1d246e",background:"#323dbb",borderRadius:"12px",color:"white",padding:"10px"}},children:e})},_=function(t){var e=t.name,n=t.code;return Object(y.jsx)("img",{alt:e,height:20,width:30,src:"http://purecatamphetamine.github.io/country-flag-icons/3x2/".concat(n,".svg")})},M=function(t){var e=t.data,n=t.className,r=void 0===n?"":n,o=t.distance,i=t.children,a=e.address.city||e.address.town||e.address.municipality||e.address.county||e.address.village;a||console.log(e);var c=e.address.neighbourhood||e.address.suburb||e.address.city_district;return Object(y.jsxs)("div",{className:"data-container ".concat(r),children:[c&&Object(y.jsxs)("span",{children:["Bairro: ",c]}),a&&Object(y.jsxs)("span",{children:["Cidade: ",a]}),e.address.state&&Object(y.jsxs)("span",{children:["Estado: ",e.address.state]}),e.address.region&&Object(y.jsxs)("span",{children:["Regi\xe3o: ",e.address.region]}),e.address.country&&e.address.country_code&&Object(y.jsxs)("span",{className:"country",children:["Pa\xeds: ",e.address.country,Object(y.jsx)(_,{name:e.address.country,code:(e.address.country_code||"").toUpperCase()})]}),o&&Object(y.jsxs)("span",{children:["Dist\xe2ncia: ",o," km"]}),i]})},I=function(t){var e=t.color,n=void 0===e?"white":e;return Object(y.jsxs)("div",{className:"spinner",style:{borderColor:n},children:[Object(y.jsx)("div",{style:{borderColor:n}}),Object(y.jsx)("div",{style:{borderColor:n}})]})},P=n(29),F=function(t,e,n,r){return t+60*e+60*n*60+60*r*60*24},T=function(t){var e=t.start,n=void 0===e?0:e,o=t.step,i=void 0===o?10:o,a=t.children,c=t.onChange,s=t.onStep,u=Object(P.useStopwatch)({autoStart:!0,offsetTimestamp:new Date(Date.now()+1e3*n)}),l=u.seconds,d=u.minutes,h=u.hours,f=u.days,p=Object(r.useRef)(n);return Object(r.useEffect)((function(){var t=F(l,d,h,f);c&&c(t),s&&t>=p.current+i&&(s(t),p.current=t)}),[c,l,d,h,f,s,n,i]),Object(y.jsxs)("div",{className:"stopwatch",children:[Object(y.jsx)("div",{className:"stopwatch-time shaking",children:"\u23f0"}),Object(y.jsxs)("span",{className:"stopwatch-time",children:[F(l,d,h,f),a]})]})},G={lat:10.99835602,lng:77.01502627},J=function(t){var e=t.streetViewPanorama,n=t.coordinates,o=t.children,i=Object(r.useState)(),a=Object(v.a)(i,2),c=a[0],s=a[1],u=Object(r.useRef)(null);return n?Object(y.jsx)(f.c,{position:n,onLoad:function(t){return s(t)},onClick:function(){u.current&&u.current.state.infoWindow&&u.current.state.infoWindow.open(e)},children:o&&c&&Object(y.jsx)(f.b,{ref:u,options:{pixelOffset:new google.maps.Size(0,-50,"px","px")},children:o})}):null},D=function(t){var e=t.markers,n=void 0===e?[]:e,o=t.guesses,i=void 0===o?[]:o,a=t.coordinates,c=void 0===a?G:a,s=Object(r.useState)(!1),u=Object(v.a)(s,1)[0],l=Object(r.useState)(),d=Object(v.a)(l,2),h=d[0],p=d[1],j={clickToGo:!0,position:c,pov:{heading:0,pitch:0},zoom:1,visible:!0,enableCloseButton:!1,disableDefaultUI:!0};return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(f.a,{mapContainerStyle:{height:"100%"},center:c,zoom:10,children:[Object(y.jsx)(f.d,{onLoad:function(t){return p(t)},options:j}),u&&h&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(J,{streetViewPanorama:h,coordinates:c,children:Object(y.jsx)("span",{children:"This is the initial location"})}),i.map((function(t){return Object(y.jsx)(J,{streetViewPanorama:h,coordinates:{lat:Number(t.data.lat),lng:Number(t.data.lon)},children:Object(y.jsx)(M,{data:t.data})},t.id)})),n.map((function(t,e){return Object(y.jsx)(J,{streetViewPanorama:h,coordinates:t.coordinates,children:Object(y.jsx)("span",{children:t.data})},e)}))]})]})})};function z(){z=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(N){c=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new w(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return L()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=O(a,n);if(c){if(c===l)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(N){return{type:"throw",arg:N}}}t.wrap=s;var l={};function d(){}function h(){}function f(){}var p={};c(p,o,(function(){return this}));var j=Object.getPrototypeOf,v=j&&j(j(k([])));v&&v!==e&&n.call(v,o)&&(p=v);var b=f.prototype=d.prototype=Object.create(p);function m(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function r(o,i,a,c){var s=u(t[o],t,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(d).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}}function O(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function y(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=f,c(b,"constructor",f),c(f,"constructor",h),h.displayName=c(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,c(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},m(g.prototype),c(g.prototype,i,(function(){return this})),t.AsyncIterator=g,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new g(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(b),c(b,a,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=k,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(y),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),y(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;y(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:k(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}var V=function(t){return fetch(t).then((function(t){return t.json()}))},H=function(t){var e=t.position,n=t.showConfirmButton,r=t.onConfirm,o=t.children,i=Object(m.a)("https://nominatim.openstreetmap.org/reverse.php?lat=".concat(e.lat,"&lon=").concat(e.lng,"&zoom=18&format=jsonv2"),V,{suspense:!0}).data;return i.error||!i.address?Object(y.jsx)("span",{className:"data-container",children:"N\xe3o consegui localizar, tente novamente."}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)(M,{data:i,children:o}),n&&Object(y.jsx)(L,{onClick:function(){return r&&r(i)},children:"Confirmar"})]})},A=function(t){var e=t.coordinates,n=t.marker,i=t.onConfirm,a=Object(r.useState)(!1),c=Object(v.a)(a,2),s=c[0],u=c[1],l=Object(r.useState)(!1),d=Object(v.a)(l,2),h=d[0],p=d[1],j=Object(r.useMemo)((function(){return function(t,e){var n=t.lat*(Math.PI/180),r=e.lat*(Math.PI/180),o=r-n,i=(e.lng-t.lng)*(Math.PI/180);return 7917.6*Math.asin(Math.sqrt(Math.sin(o/2)*Math.sin(o/2)+Math.cos(n)*Math.cos(r)*Math.sin(i/2)*Math.sin(i/2)))}(n,e)}),[n,e]);Object(r.useEffect)((function(){p(!1)}),[n]);return Object(y.jsx)(f.c,{position:n,onClick:function(){return u(!0)},onPositionChanged:function(){return u(!0)},onLoad:function(){return u(!0)},children:s&&Object(y.jsx)(f.b,{onCloseClick:function(){return u(!1)},children:Object(y.jsx)(o.a.Suspense,{fallback:Object(y.jsx)(I,{color:"#323dbb"}),children:Object(y.jsx)(H,{position:n,showConfirmButton:!h,onConfirm:function(t){p(!0),i(t,j)},children:h&&Object(y.jsxs)("span",{children:["Dist\xe2ncia: ",j.toFixed(2),"km"]})})})})})},B=function(t){var e=t.guesses,n=Object(r.useState)(),i=Object(v.a)(n,2),a=i[0],c=i[1];return Object(y.jsx)(y.Fragment,{children:e.map((function(t){var e={lat:Number(t.data.lat),lng:Number(t.data.lon)};return Object(y.jsx)(f.c,{position:e,icon:"https://maps.google.com/mapfiles/ms/icons/yellow-dot.png",onClick:function(){return c(t.id)},children:a===t.id&&Object(y.jsx)(f.b,{onCloseClick:function(){return c(t.id)},children:Object(y.jsx)(o.a.Suspense,{fallback:Object(y.jsx)(I,{color:"#323dbb"}),children:Object(y.jsxs)(H,{position:e,showConfirmButton:!1,children:[Object(y.jsxs)("span",{children:["Dist\xe2ncia: ",t.distance.toFixed(2),"km"]}),Object(y.jsxs)("span",{children:["Palpite aos ",t.timestamp,"s"]})]})})})},t.id)}))})},R=function(t){var e=t.coordinates,n=t.guesses,o=t.onConfirm,i=Object(r.useState)(N),a=Object(v.a)(i,2),c=a[0],s=a[1],u=Object(r.useState)(4.5),l=Object(v.a)(u,2),d=l[0],h=l[1],f=Object(r.useState)(),p=Object(v.a)(f,2),b=p[0],m=p[1],g=function(){var t=Object(j.a)(z().mark((function t(e){var n,r,o,i,a;return z().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),n=e.target.locale.value,r=encodeURIComponent(n),t.next=5,fetch("https://nominatim.openstreetmap.org/search.php?q=".concat(r,"&polygon_geojson=1&format=jsonv2"));case 5:return o=t.sent,t.next=8,o.json();case 8:(i=t.sent)&&i[0]&&(s({lat:Number(i[0].lat),lng:Number(i[0].lon)}),a=C(Number(i[0].boundingbox[0]),Number(i[0].boundingbox[2]),Number(i[0].boundingbox[1]),Number(i[0].boundingbox[3])),h(a));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(y.jsxs)("div",{className:"place-chooser-container",children:[Object(y.jsx)("div",{className:"search-place-form",children:Object(y.jsxs)("form",{onSubmit:g,children:[Object(y.jsx)("input",{name:"locale",id:"locale"}),Object(y.jsx)(L,{children:"Pesquisar"})]})}),Object(y.jsx)("div",{className:"place-chooser-map-container",children:Object(y.jsxs)(S,{coordinates:c,zoom:d,options:{clickableIcons:!1},onMapClick:function(t){t.latLng&&m(t.latLng.toJSON())},children:[Object(y.jsx)(B,{guesses:n}),b&&Object(y.jsx)(A,{coordinates:e,marker:b,onConfirm:o})]})})]})},Y=function(t){var e=t.show,n=t.coordinates,r=t.guesses,o=t.onHide,i=t.onConfirm;return Object(y.jsx)(E,{show:e,onHide:o,children:Object(y.jsx)(R,{coordinates:n,guesses:r,onConfirm:i})})},q=function(t){var e=t.hints,n=t.hintsViewed,r=t.show,o=t.onHide,i=t.onTipView;return Object(y.jsx)(E,{show:r,onHide:o,children:Object(y.jsx)("ul",{children:e.map((function(t){var e=n.find((function(e){return e.id===t.id}));return e?Object(y.jsxs)("li",{children:[t.description," - Visto aos ",e.timestamp,"s"]},t.id):Object(y.jsx)("li",{children:Object(y.jsx)(L,{onClick:function(){return i(t.id)},children:"Mostrar"})},t.id)}))})})},U=function(t){var e=t.current,n=t.userData,o=t.onNext,i=t.onGuess,a=t.onHintViewed,c=t.onTimePassed,s=Object(r.useState)(!1),u=Object(v.a)(s,2),l=u[0],d=u[1],h=Object(r.useState)(!1),f=Object(v.a)(h,2),p=f[0],j=f[1],b=Object(r.useRef)(0),m=n?n.hints.filter((function(t){return t.viewed})):[];return Object(y.jsxs)("div",{className:"game-container full",children:[Object(y.jsxs)("div",{className:"game-header",children:[Object(y.jsxs)("div",{children:[Object(y.jsx)(L,{onClick:function(){return d((function(t){return!t}))},children:"Palpitar"}),Object(y.jsxs)(L,{onClick:function(){return j((function(t){return!t}))},children:["Dicas ",m.length,"/",e.hints.length]})]}),Object(y.jsx)("div",{children:Object(y.jsx)(T,{start:(null===n||void 0===n?void 0:n.current_time)||0,onChange:function(t){return b.current=t},onStep:c},e.id)}),Object(y.jsx)("div",{children:Object(y.jsx)(L,{onClick:function(){return o()},children:"Pular"})})]}),Object(y.jsx)("div",{className:"game-body full-height",children:Object(y.jsx)(D,{markers:e.markers,guesses:(null===n||void 0===n?void 0:n.guesses)||[],coordinates:e.coordinates})}),Object(y.jsx)(Y,{show:l,coordinates:e.coordinates,guesses:(null===n||void 0===n?void 0:n.guesses)||[],onHide:function(){return d(!1)},onConfirm:function(t,e){i(t,b.current,e)}}),Object(y.jsx)(q,{hints:e.hints,hintsViewed:m,show:p,onHide:function(){return j(!1)},onTipView:function(t){return a(t,b.current)}})]})},W=n(30),Z=function(t){var e=t.style,n=void 0===e?{}:e,r=t.current,o=t.levels,i=t.userData,a=t.onLevelClick;return Object(y.jsx)(y.Fragment,{children:o.map((function(t){var e=i.find((function(e){return e.level_id===t.id})),o=null;return e&&e.guesses&&(o=e.guesses.sort((function(t,e){return t.distance-e.distance}))[0]),Object(y.jsxs)(L,{className:"path-content-level full ".concat(r===t.id?"current":""),onClick:function(){return a(t.id)},style:n,children:[Object(y.jsx)("span",{className:"level-number ".concat(o?"":"never-tried"),children:t.id}),o&&Object(y.jsxs)("div",{className:"best-guess-path",children:[Object(y.jsx)("span",{className:"best-guess-path-title",children:"Melhor palpite"}),Object(y.jsxs)("span",{children:["Dist\xe2ncia: ",o.distance.toFixed(2)," km"]}),Object(y.jsxs)("span",{children:["Dicas: ",o.hints_viewed]})]})]},t.id)}))})},K=function(t){var e=t.levels,n=t.userData,o=t.current,i=t.onLevelClick,a=Object(r.useState)(!1),c=Object(v.a)(a,2),s=c[0],u=c[1],l=Object(W.a)(),d=Object(v.a)(l,2),h=d[0],f=d[1].width,p=2;return f>2500?p=7:f>1800?p=6:f>1200?p=5:f>850?p=4:f>600&&(p=3),Object(y.jsxs)("div",{className:"path-container shown",children:[Object(y.jsx)(L,{onClick:function(){return u((function(t){return!t}))},children:"N\xedveis"}),Object(y.jsxs)(E,{show:s,onHide:function(){return u(!1)},children:[Object(y.jsx)("div",{className:"levels-container",ref:h,children:Object(y.jsx)(Z,{style:{width:(f||0)/p-20,height:(f||0)/p-20,margin:10},levels:e,userData:n,current:o,onLevelClick:function(t){i(t),u(!1)}})}),Object(y.jsx)("div",{children:"Mais por vir..."})]})]})};function X(){X=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(N){c=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),a=new w(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return L()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=O(a,n);if(c){if(c===l)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=u(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===l)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(N){return{type:"throw",arg:N}}}t.wrap=s;var l={};function d(){}function h(){}function f(){}var p={};c(p,o,(function(){return this}));var j=Object.getPrototypeOf,v=j&&j(j(k([])));v&&v!==e&&n.call(v,o)&&(p=v);var b=f.prototype=d.prototype=Object.create(p);function m(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){function r(o,i,a,c){var s=u(t[o],t,i);if("throw"!==s.type){var l=s.arg,d=l.value;return d&&"object"==typeof d&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(d).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,c)}))}c(s.arg)}var o;this._invoke=function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}}function O(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function y(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=f,c(b,"constructor",f),c(f,"constructor",h),h.displayName=c(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,c(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},m(g.prototype),c(g.prototype,i,(function(){return this})),t.AsyncIterator=g,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var a=new g(s(e,n,r,o),i);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(b),c(b,a,"Generator"),c(b,o,(function(){return this})),c(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=k,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(y),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(c&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),y(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;y(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:k(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}var Q=Object(b.a)("https://ddzlknjoifzrxzclbzop.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRkemxrbmpvaWZ6cnh6Y2xiem9wIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NTQxMTcyODAsImV4cCI6MTk2OTY5MzI4MH0.T_giaHDYzzpnJ3MfavMKAlKOsY3PpVqG6693vENyGMw"),$=function(t){var e=t.levels,n=t.data,o=t.onUpdate,i=Object(r.useState)(2),a=Object(v.a)(i,2),c=a[0],s=a[1],u=function(){var t=Object(j.a)(X().mark((function t(e){var n,r,i,a=arguments;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=!(a.length>1&&void 0!==a[1])||a[1],t.next=3,Q.from("data").update({data:e.data}).match({id:e.id});case 3:if(r=t.sent,!(i=r.data)||!i[0]){t.next=8;break}return n&&o(i[0]),t.abrupt("return",!0);case 8:return t.abrupt("return",!1);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=Object(j.a)(X().mark((function t(e,r){var o,i,a;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=JSON.parse(JSON.stringify(n)),i={id:e,viewed:!0,timestamp:r},(a=o.data.find((function(t){return t.level_id===c})))?a.hints.push(i):o.data.push({id:o.data.length,level_id:c,current_time:0,hints:[i],guesses:[],completed:!1}),t.next=6,u(o);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),d=function(){var t=Object(j.a)(X().mark((function t(e){var r,o;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=JSON.parse(JSON.stringify(n)),o=e||c+1,r.data.find((function(t){return t.level_id===o}))||r.data.push({id:r.data.length,level_id:o,current_time:0,hints:[],guesses:[],completed:!1}),t.next=6,u(r);case 6:if(!t.sent){t.next=8;break}s((function(t){return e||t+1}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=Object(j.a)(X().mark((function t(e,r,o){var i,a,s;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=JSON.parse(JSON.stringify(n)),a=i.data.find((function(t){return t.level_id===c})),s={id:a?a.guesses.length+1:1,distance:o,timestamp:r,hints_viewed:a?a.hints.length:0,data:e},a?a.guesses.push(s):i.data.push({id:i.data.length,level_id:c,current_time:0,hints:[],guesses:[s],completed:!1}),t.next=6,u(i);case 6:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),f=function(){var t=Object(j.a)(X().mark((function t(e){var r,o;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=JSON.parse(JSON.stringify(n)),(o=r.data.find((function(t){return t.level_id===c})))?o.current_time=e:r.data.push({id:r.data.length,level_id:c,current_time:e,hints:[],guesses:[],completed:!1}),t.next=5,u(r,!1);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(y.jsxs)("div",{className:"full",children:[Object(y.jsx)(U,{current:e.find((function(t){return t.id===c})),userData:n.data.find((function(t){return t.level_id===c})),onNext:d,onGuess:h,onHintViewed:l,onTimePassed:f}),Object(y.jsx)(K,{levels:e,userData:n.data,current:c,onLevelClick:d})]})},tt=function(){var t=Object(r.useState)(),e=Object(v.a)(t,2),n=e[0],o=e[1],i=Object(r.useState)(),a=Object(v.a)(i,2),c=a[0],s=a[1],u=Object(r.useState)(),l=Object(v.a)(u,2),d=l[0],h=l[1],f=function(){var t=Object(j.a)(X().mark((function t(){var e,n,r;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q.from("levels").select().order("id");case 2:e=t.sent,n=e.data,(r=e.error)&&h(r),n&&s(n);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){n&&!c&&f()}),[n,c]);var p=function(){var t=Object(j.a)(X().mark((function t(e){var n,r,i,a,c,s,u;return X().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),n=e.target.user.value,t.next=4,Q.from("data").select().eq("user",n);case 4:if(r=t.sent,i=r.data,!(a=r.error)){t.next=10;break}return h(a),t.abrupt("return");case 10:if(!i||!i[0]){t.next=14;break}return o(i[0]),window.localStorage.setItem("user",n),t.abrupt("return");case 14:if(!window.confirm("No user, create?")){t.next=22;break}return t.next=17,Q.from("data").insert([{user:n,data:[]}]);case 17:c=t.sent,s=c.data,u=c.error,s&&s[0]&&(o(s[0]),window.localStorage.setItem("user",n)),u&&h(u);case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return d?Object(y.jsxs)("div",{className:"login-container",children:[Object(y.jsx)("pre",{children:JSON.stringify(d,null,2)}),Object(y.jsx)(L,{onClick:function(){return h(void 0)},children:"Retry"})]}):n?c?Object(y.jsx)($,{levels:c,data:n,onUpdate:o}):Object(y.jsx)("div",{className:"login-container",children:Object(y.jsx)("span",{children:"Loading levels..."})}):Object(y.jsx)("div",{className:"login-container",children:Object(y.jsxs)("form",{onSubmit:p,children:[Object(y.jsxs)("div",{children:[Object(y.jsx)("label",{htmlFor:"name",children:"User"}),Object(y.jsx)("input",{name:"user",id:"user",defaultValue:window.localStorage.getItem("user")||""})]}),Object(y.jsx)("div",{children:Object(y.jsx)(L,{children:"Entrar"})})]})})},et={lat:-20.3864301,lng:-43.5027689},nt=function(){var t=Object(f.e)({googleMapsApiKey:"AIzaSyBs7wwrJWJFkNijHdAkRwqBd-M7SCVIMIY"}),e=t.isLoaded,n=t.loadError;return!e||n?null:Object(y.jsx)("div",{className:"App",children:Object(y.jsx)("div",{className:"full",children:Object(y.jsxs)(p.c,{children:[Object(y.jsx)(p.a,{path:"/",element:Object(y.jsx)(tt,{})}),Object(y.jsx)(p.a,{path:"street-view",element:Object(y.jsx)(D,{coordinates:et})}),Object(y.jsx)(p.a,{path:"map",element:Object(y.jsx)(S,{coordinates:et})})]})})})},rt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,64)).then((function(e){var n=e.getCLS,r=e.getFID,o=e.getFCP,i=e.getLCP,a=e.getTTFB;n(t),r(t),o(t),i(t),a(t)}))};n(60);d.a.registerLocale(h),u.a.setAppElement(document.getElementById("modal-container")||document.body.appendChild(document.createElement("div"))),a.a.render(Object(y.jsx)(c.a,{children:Object(y.jsx)(nt,{})}),document.getElementById("root")),rt()}},[[61,1,2]]]);
//# sourceMappingURL=main.638e508a.chunk.js.map